<div class="container" th:fragment="header(activePage)">
    <nav class="navbar">
        <a class="navbar-brand" href="/catalog" th:text="#{brand}">WorkSwap</a>
        <button class="navbar-toggler">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse">

            <div class="sorting-sidebar-top" th:if="${activePage == 'catalog'}" th:unless="${category == 'find-help'}">
                <h5 th:text="#{catalog.sorting.title}">Сортировка</h5>
                <div class="list-group list-group-flush">
                    <a th:href="@{/catalog(category=${category}, sortBy='date')}"
                        th:class="${sortBy == 'date'} ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'" th:text="#{catalog.sorting.date}">
                        По дате
                    </a>
                    <a th:href="@{/catalog(category=${category}, sortBy='price')}"
                        th:class="${sortBy == 'price'} ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'" th:text="#{catalog.sorting.price}">
                        По цене
                    </a>
                    <a th:href="@{/catalog(category=${category}, sortBy='rating')}"
                        th:class="${sortBy == 'rating'} ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'" th:text="#{catalog.sorting.rating}">
                        По рейтингу
                    </a>
                    <a th:href="@{/catalog(category=${category}, sortBy='popularity')}"
                        th:class="${sortBy == 'popularity'} ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'" th:text="#{catalog.sorting.popularity}">
                        По популярности
                    </a>
                </div>
            </div>

            <!-- Кнопка Новостей (активная) -->
            <a href="/news" class="nav-link" th:text="#{header.news}">Новости</a>

            <div class="d-flex">
                <!-- Для неавторизованных пользователей -->
                <div th:unless="${isAuthenticated}">
                    <a href="/login" class="btn btn-outline-primary d-flex align-items-center gap-2">
                        <svg width="18" height="18" viewBox="0 0 48 48">
                            <path fill="#EA4335" d="M24 9.5c3.2 0 6 .9 8.3 2.4l6.2-6.2C34.5 2.6 29.6 0 24 0 14.7 0 6.9 5.7 3.4 13.9l7.3 5.7C12.4 13.2 17.7 9.5 24 9.5z"/>
                            <path fill="#4285F4" d="M46.1 24.5c0-1.6-.1-2.8-.4-4.1H24v7.8h12.6c-.5 3-2 5.6-4.3 7.3l6.7 5.2c3.9-3.6 6.1-8.9 6.1-16.2z"/>
                            <path fill="#FBBC05" d="M10.7 28.8c-1.2-3.6-1.2-7.5 0-11l-7.3-5.7C.8 16.6 0 20.2 0 24c0 3.8.8 7.4 2.3 10.7l8.4-5.9z"/>
                            <path fill="#34A853" d="M24 48c5.6 0 10.3-1.8 13.7-4.8l-6.7-5.2c-2 1.3-4.5 2-7 2-6.3 0-11.6-3.7-13.6-9l-8.4 5.9C6.9 42.3 14.7 48 24 48z"/>
                            <path fill="none" d="M0 0h48v48H0z"/>
                        </svg>
                        <span th:text="#{header.login}">Войти через Google</span>
                    </a>
                </div>

                <!-- Для авторизованных пользователей -->
                <div th:if="${isAuthenticated}" class="account-info">
                    <a th:href="@{/secure/account}" class="account-link">
                        <img th:src="${user.avatarUrl}"
                                class="account-avatar"
                                alt="Аватар"
                                th:onerror="this.src='/images/avatar-placeholder.png'">
                        <span th:text="${user.name}">Пользователь</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>
</div>